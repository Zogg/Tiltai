from control import gate, push, pull
from control import dockersdn

import hashlib


def encryptor():
    plaintext = gate('in', network=dockersdn('plaintext'){'ports': [4567], 'type': PULL})
    encrypted = gate('out', network=dockersdn('encrypted'))

    while True:
        packet = pull(plaintext)
        epacket = hashlib.sha512(packet).hexdigest()
        push(epacket, encrypted)


if __name__ == '__main__':
  encryptor()
